<%- css('css/tech/toc') %>
<% page.includeHtml = page.includeHtml || false %>

<div class="widget-wrap widget-list widget-toc">
    <h3 class="widget-title"><%= __('sidebar.toc') %></h3>
    <div class="widget">
        <div class="toc"></div>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/3.0.5/tocbot.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/3.0.5/tocbot.min.js"></script>
        <script>
        $(function(){
            $('.main-body-content').find('h1,h2,h3').each(function(i){
                if(!$(this).attr('id')) $(this).attr('id','list'+i) ;
            })

            tocbot.init({
                tocSelector: '.toc',
                contentSelector: '.main-body-content',
                headingSelector: 'h1, h2, h3',
                collapseDepth: 2,
                positionFixedSelector: '.widget-toc',
                fixedSidebarOffset: 595,
                includeHtml: <%- page.includeHtml %>
            });
        })
        </script>
    </div>
</div>
